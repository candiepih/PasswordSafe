(()=>{"use strict";const e={lower:"a-z",upper:"A-Z",number:"0-9",symbol:"!\"\\#\\$%\\&'()\\*\\+,-.\\/:;<=>\\?@\\[\\]\\^_'\\|"},t=()=>{const e=new Uint8Array(1);return window.crypto.getRandomValues(e),e[0]},n=document.querySelector('input[type="password"]');let r;const o=["login","submit","signin"],s=["register","signup","submit","apply"];let i;const l=chrome.runtime.connect({name:"content"}),u=new URL(window.location.href).hostname;let c="";var a;!function(e){e[e.LOGIN=0]="LOGIN",e[e.REGISTER=1]="REGISTER"}(a||(a={}));const d=[];d.push(...document.querySelectorAll("button")),d.push(...document.querySelectorAll('button[type="submit"]')),d.push(...document.querySelectorAll('input[type="submit"]')),d.push(...document.querySelectorAll('input[type="button"]'));const m=d.filter((e=>null!==e)).map((e=>{let t="";if("BUTTON"===e.tagName?t=e.innerText.toLowerCase().trim().replace(/ /g,""):"INPUT"===e.tagName&&(t=e.value.toLowerCase().trim().replace(/ /g,"")),t.length>0||""!==t){if(o.includes(t))return a.LOGIN;if(s.includes(t))return a.REGISTER}})).filter((e=>void 0!==e))[0],p=n=>{if(void 0===r){const e=[...document.querySelectorAll(".chrome-ext-info")];if(m===a.LOGIN&&c)r=document.querySelector(".chrome-ext-autofill"),e[1].addEventListener("click",(()=>(e=>{e.value=c})(n))),document.querySelector(".saved-pass-field").innerHTML=`${"&#11044; ".repeat(c.length)}`;else{if(m!==a.REGISTER)return;r=document.querySelector(".chrome-ext-generate"),e[0].addEventListener("click",(()=>(e=>{const t=document.querySelector(".chrome-ext-suggested");e.value=t.innerText,(e=>{const t=u;l.postMessage({action:"savePassword",url:t,password:e})})(e.value)})(n))),i=document.querySelector(".chrome-ext-suggested")}r.style.width=`${n.offsetWidth}px`}n.value.length<1&&r.classList.remove("hide"),m===a.REGISTER&&void 0!==i&&(i.innerText=((n,r)=>{const o=(s=Object.keys(n).filter((e=>n[e])).map((t=>e[t])).join(""),new RegExp(`[${s}]`));var s;return Array.from({length:r},(()=>{for(;;){const e=t(),n=String.fromCharCode(e);if(o.test(n))return n}})).join("")})({upper:!0,lower:!0,number:!0,symbol:!0},12))},h=()=>{void 0!==r&&setTimeout((()=>{r.classList.add("hide")}),110)};l.postMessage({action:"checkUser"}),l.postMessage({action:"getSavedPassword",url:u}),l.onMessage.addListener((e=>{void 0!==e.isNew?null===n||e.isNew||g():void 0!==e.password?c=e.password:void 0!==e.saved&&alert("Your password has been saved successfully.")}));const g=()=>{fetch(chrome.runtime.getURL("content.html")).then((e=>e.text())).then((e=>{n.insertAdjacentHTML("afterend",e)})),n.addEventListener("focus",(e=>p(e.target))),n.addEventListener("blur",(()=>h())),(e=>{setInterval((()=>{e.value.length>0&&void 0!==r&&(r.classList.contains("hide")||h())}),200)})(n)}})();